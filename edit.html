<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Six'0 — Site Editor</title>
  <style>
    :root{--bg:#07070b;--panel:#0f1220;--muted:#9aa6c0;--accent:#00ffe1;--accent2:#7a5cff;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;min-height:100vh;background:linear-gradient(180deg,#040407,#0b0b11);color:#e7f2ff}
    header{display:flex;align-items:center;gap:16px;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,0.03)}
    header h1{font-family: 'Orbitron',sans-serif;margin:0;font-size:18px;color:var(--accent)}
    .wrap{display:grid;grid-template-columns:420px 1fr;gap:16px;max-width:1300px;margin:20px auto;padding:12px}
    .panel{background:var(--panel);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);} 
    .panel h2{margin:0 0 8px 0;font-size:14px;color:var(--accent)}
    label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
    input[type=text], textarea, select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;margin-top:6px}
    textarea{min-height:70px}
    .small{font-size:12px;color:var(--muted)}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit;text-decoration:none;cursor:pointer;margin-right:8px}
    .btn.primary{border-color:var(--accent);box-shadow:0 8px 22px rgba(0,255,225,0.04)}
    .list{margin-top:10px}
    .node{display:flex;gap:8px;align-items:flex-start;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005))}
    .node .col{flex:1}
    .node .actions{display:flex;flex-direction:column;gap:6px}
    .actions .btn{padding:6px 8px}
    .preview-wrap{display:flex;flex-direction:column;height:calc(100vh - 120px)}
    .preview-frame{flex:1;border-radius:12px;border:1px solid rgba(255,255,255,0.03);overflow:hidden}
    .foot{margin-top:8px;color:var(--muted);font-size:13px}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .flex{display:flex;gap:8px;align-items:center}
    .import-area{width:100%;min-height:90px;margin-top:8px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px dashed rgba(255,255,255,0.02);color:var(--muted)}
    @media(max-width:980px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <header>
    <h1>Six'0 — Interactive Site Editor</h1>
    <div class="small">Edit your <strong>index.html</strong> visually — preview & export. Designed for GitHub Pages.</div>
  </header>

  <div class="wrap">
    <div class="panel">
      <h2>Site metadata</h2>
      <label>Site name<input id="site-name" type="text" value="Six'0"></label>
      <label>Tagline<input id="site-tag" type="text" value="Systems Architect • Experimentalist • Signal Entity"></label>

      <div style="margin-top:12px">
        <button id="fetch-site" class="btn">Load existing /index.html</button>
        <button id="import-text" class="btn">Import HTML from clipboard / paste</button>
      </div>

      <div style="margin-top:10px">
        <label class="small">If automatic load fails, paste your current index.html here:</label>
        <textarea id="import-html" class="import-area" placeholder="Paste full index.html here then click 'Parse pasted HTML'"></textarea>
        <div style="margin-top:8px">
          <button id="parse-paste" class="btn">Parse pasted HTML</button>
        </div>
      </div>

      <h2 style="margin-top:16px">Network nodes (links)</h2>
      <div class="hint">Add / edit / remove the external nodes that will appear on the main site.</div>
      <div id="nodes" class="list"></div>
      <div style="margin-top:8px">
        <button id="add-node" class="btn primary">+ Add node</button>
      </div>

      <h2 style="margin-top:14px">Discord</h2>
      <label>Discord username<input id="discord-username" type="text" placeholder="brianxd2011"></label>

      <div style="margin-top:12px">
        <button id="apply" class="btn primary">Apply to preview</button>
        <button id="download" class="btn">Export index.html (download)</button>
      </div>

      <div class="foot">To publish: drag the exported index.html into your repo on GitHub (web UI) or push via git to the gh-pages branch / main branch depending on your Pages setup.</div>
    </div>

    <div class="panel preview-wrap">
      <div style="display:flex;gap:10px;align-items:center;margin-bottom:8px">
        <h2 style="margin:0;color:var(--accent)">Live preview</h2>
        <div class="small">Preview updates come from the editor template. Use "Export" to download the new index.html</div>
      </div>

      <iframe id="preview" class="preview-frame"></iframe>
      <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
        <button id="open-new-tab" class="btn">Open preview in new tab</button>
        <button id="copy-html" class="btn">Copy HTML to clipboard</button>
        <button id="reset" class="btn">Reset to template</button>
      </div>

      <div class="hint">Tip: After exporting, replace the hosted <code>index.html</code> in your GitHub repository (GitHub → repo → Add file → Upload files / Edit file) and commit. GitHub Pages will serve the new version a few seconds later.</div>
    </div>
  </div>

  <script>
    // Template for index.html (clean, same style used previously). Use placeholders: {{NAME}}, {{TAGLINE}}, {{NETWORK_CARDS}}, {{DISCORD_ID}}
    const template = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{NAME}} — About</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=JetBrains+Mono:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#07070b;--card:#0f1220cc;--glass: rgba(255,255,255,0.04);--accent:#00ffe1;--accent2:#7a5cff;--muted:#9aa6c0;--text:#e7f2ff;--card-border: rgba(122,92,255,0.12)}
    *{box-sizing:border-box}
    body{margin:0;font-family: 'JetBrains Mono', monospace;background: radial-gradient(1200px 600px at 10% 10%, #0d0f17 0%, #050509 35%, #020203 100%);color:var(--text)}
    .wrap{max-width:1100px;margin:40px auto;padding:28px}
    .top{display:flex;gap:20px;align-items:center;flex-wrap:wrap}
    .avatar{width:118px;height:118px;border-radius:18px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-family: 'Orbitron',sans-serif;font-size:30px;color:#03030a}
    .meta{flex:1;min-width:220px}
    .name{font-family:'Orbitron',sans-serif;font-size:48px;margin:6px 0;color:transparent;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text}
    .tag{color:var(--muted);margin-bottom:8px}
    .button{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:var(--text);text-decoration:none}
    .section{margin-top:28px}
    .title{font-family:'Orbitron';color:var(--accent);margin-bottom:10px}
    .network-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:16px;border:1px solid var(--card-border);backdrop-filter:blur(6px)}
    .service{display:flex;align-items:center;gap:12px}
    .svc-icon{width:52px;height:52px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:700}
    .svc-title{font-family:'Orbitron';color:var(--accent);font-size:18px}
    .svc-desc{color:var(--muted);font-size:13px;margin-top:6px}
    .discord-id{font-family:'JetBrains Mono';background:linear-gradient(90deg,#101216,#0a0c10);padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);display:inline-block;color:var(--accent2)}
    footer{margin-top:30px;text-align:center;color:var(--muted);font-size:13px}
    @media(max-width:600px){.name{font-size:32px}.avatar{width:90px;height:90px;font-size:24px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="avatar">S'0</div>
      <div class="meta">
        <div class="name">{{NAME}}</div>
        <div class="tag">{{TAGLINE}}</div>
        <div style="margin-top:12px"><a class="button" href="#network">View Network</a></div>
      </div>
    </header>

    <section class="section" id="network">
      <div class="title">// network :: external nodes</div>
      <p style="color:var(--muted);margin-bottom:14px">Direct endpoints and public signal endpoints.</p>

      <div class="network-grid">
        {{NETWORK_CARDS}}
      </div>
    </section>

    <section class="section" id="contact">
      <div class="title">// contact & identity</div>
      <p style="color:var(--muted)">Discord username: <span class="discord-id">{{DISCORD_ID}}</span></p>
    </section>

    <footer>Six'0 • Systems & Signals • handcrafted UI</footer>
  </div>
</body>
</html>`;

    // Editor state
    let nodes = [
      {title:'GitHub', url:'https://github.com/Brancovic', desc:'Code repositories, system tools, and experimental builds', embeddable:['repo cards','README preview']},
      {title:'Steam', url:'https://steamcommunity.com/profiles/76561198118695173', desc:'Simulation environments and digital worlds', embeddable:['profile summary','recent games']},
      {title:'Instagram', url:'https://www.instagram.com/brix_tin/', desc:'Visual feed and thumbnails', embeddable:['single post','grid preview']},
      {title:'Spotify', url:'https://open.spotify.com/user/akamentv?si=cb7ea8ef859f49da', desc:'Audio streams and playlists', embeddable:['playlist widget','track widget']},
      {title:'FetLife', url:'https://fetlife.com/Six0Four', desc:'Restricted content profile', embeddable:['profile link']}
    ];

    // DOM helpers
    const el = id => document.getElementById(id);
    const nodesRoot = el('nodes');

    function renderNodes(){
      nodesRoot.innerHTML = '';
      nodes.forEach((n, i) => {
        const div = document.createElement('div'); div.className='node';
        div.innerHTML = `
          <div class="col">
            <input data-i="${i}" class="node-title" type="text" value="${escapeHtml(n.title)}" placeholder="Service name" />
            <input data-i="${i}" class="node-url" type="text" value="${escapeHtml(n.url)}" placeholder="https://..." style="margin-top:6px" />
            <input data-i="${i}" class="node-desc" type="text" value="${escapeHtml(n.desc)}" placeholder="Short description" style="margin-top:6px" />
            <div class="hint small">Embeddable: ${n.embeddable ? n.embeddable.join(', ') : 'none'}</div>
          </div>
          <div class="actions">
            <button class="btn" data-action="up" data-i="${i}">▲</button>
            <button class="btn" data-action="down" data-i="${i}">▼</button>
            <button class="btn" data-action="remove" data-i="${i}">✖</button>
          </div>
        `;
        nodesRoot.appendChild(div);
      });
      // attach events
      nodesRoot.querySelectorAll('input.node-title, input.node-url, input.node-desc').forEach(inp=>{
        inp.addEventListener('input', e=>{
          const i = +e.target.dataset.i;
          if(e.target.classList.contains('node-title')) nodes[i].title = e.target.value;
          if(e.target.classList.contains('node-url')) nodes[i].url = e.target.value;
          if(e.target.classList.contains('node-desc')) nodes[i].desc = e.target.value;
        });
      });
      nodesRoot.querySelectorAll('button[data-action]').forEach(b=>{
        b.addEventListener('click', e=>{
          const i = +e.target.dataset.i; const act = e.target.dataset.action;
          if(act==='remove'){ nodes.splice(i,1); renderNodes(); }
          if(act==='up' && i>0){ [nodes[i-1],nodes[i]]=[nodes[i],nodes[i-1]]; renderNodes(); }
          if(act==='down' && i<nodes.length-1){ [nodes[i],nodes[i+1]]=[nodes[i+1],nodes[i]]; renderNodes(); }
        });
      });
    }

    function addNode(){ nodes.push({title:'New Service', url:'https://', desc:'Short description', embeddable:[]}); renderNodes(); }

    function buildNetworkHTML(){
      return nodes.map(n=>{
        const escTitle=escapeHtml(n.title), escUrl=escapeHtml(n.url), escDesc=escapeHtml(n.desc);
        // simple icon letters
        const icon = escTitle.split(' ').map(s=>s[0]||'').slice(0,2).join('').toUpperCase();
        return `\n          <article class="card">\n            <div class="service">\n              <div class="svc-icon" style="background:linear-gradient(90deg,#071014,#0d2a20);">${icon}</div>\n              <div>\n                <div class="svc-title">${escTitle}</div>\n                <div class="svc-desc">${escDesc}</div>\n              </div>\n            </div>\n            <div style=\"margin-top:12px\">\n              <a class=\"link-btn\" href=\"${escUrl}\" target=\"_blank\">Open ${escTitle}</a>\n            </div>\n          </article>\n`;
      }).join('\n');
    }

    function generateFullHTML(){
      const name = el('site-name').value || "Six'0";
      const tag = el('site-tag').value || '';
      const discs = el('discord-username').value || '';
      const cards = buildNetworkHTML();
      return template.replace('{{NAME}}', escapeHtml(name)).replace('{{TAGLINE}}', escapeHtml(tag)).replace('{{NETWORK_CARDS}}', cards).replace('{{DISCORD_ID}}', escapeHtml(discs));
    }

    function renderPreview(){
      const html = generateFullHTML();
      const preview = el('preview');
      preview.srcdoc = html;
    }

    function download() {
      const blob = new Blob([generateFullHTML()], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='index.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    // attempt to fetch live /index.html on same origin
    async function loadExisting(){
      try{
        const res = await fetch('/index.html');
        if(!res.ok) throw new Error('Not found');
        const text = await res.text();
        parseSiteHtml(text);
        alert('Loaded /index.html and parsed it (best-effort). Review fields and click Apply.');
      }catch(err){
        alert('Failed to fetch /index.html automatically. You can paste it into the import box.');
      }
    }

    function parseSiteHtml(html){
      try{
        const parser = new DOMParser();
        const doc = parser.parseFromString(html,'text/html');
        const nameEl = doc.querySelector('.name');
        const tagEl = doc.querySelector('.tag');
        if(nameEl) el('site-name').value = nameEl.textContent.trim();
        if(tagEl) el('site-tag').value = tagEl.textContent.trim();
        const discordEl = doc.querySelector('.discord-id');
        if(discordEl) el('discord-username').value = discordEl.textContent.trim();
        // extract network nodes
        const grid = doc.querySelectorAll('.network-grid article');
        if(grid && grid.length>0){
          nodes = Array.from(grid).map(a=>{
            const ttl = a.querySelector('.svc-title') ? a.querySelector('.svc-title').textContent.trim() : (a.querySelector('a')?a.querySelector('a').textContent.trim():'');
            const desc = a.querySelector('.svc-desc')?a.querySelector('.svc-desc').textContent.trim():'';
            const link = a.querySelector('a')?a.querySelector('a').href:'https://';
            return {title:ttl||'Node', url:link, desc:desc, embeddable:[]};
          });
          renderNodes();
        }
      }catch(e){console.warn('parse error',e)}
    }

    // parse pasted html
    el('parse-paste').addEventListener('click', ()=>{
      const txt = el('import-html').value.trim();
      if(!txt) return alert('Paste your index.html first');
      parseSiteHtml(txt);
      alert('Parsed pasted HTML. Review fields then click Apply.');
    });

    el('fetch-site').addEventListener('click', ()=>loadExisting());
    el('import-text').addEventListener('click', async ()=>{
      try{
        const text = await navigator.clipboard.readText();
        el('import-html').value = text; alert('Pasted clipboard into import box. Click Parse pasted HTML to import.');
      }catch(e){alert('Clipboard read failed: paste manually.')}
    });

    el('add-node').addEventListener('click', addNode);
    el('apply').addEventListener('click', renderPreview);
    el('download').addEventListener('click', download);
    el('open-new-tab').addEventListener('click', ()=>{
      const w = window.open(); w.document.write(generateFullHTML()); w.document.close();
    });
    el('copy-html').addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(generateFullHTML()); alert('HTML copied to clipboard'); }catch(e){alert('Copy failed');}
    });
    el('reset').addEventListener('click', ()=>{ if(confirm('Reset nodes and metadata to defaults?')){ location.reload(); }});

    // utility
    function escapeHtml(s){ return (s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'","&#39;"); }

    // initial render
    renderNodes(); renderPreview();

  </script>
</body>
</html>